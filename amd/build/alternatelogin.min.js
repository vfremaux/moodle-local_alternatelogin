/**
 * Javascript controller for controlling the sections.
 *
 * @module     local_advancedperfs/perfs_panel
 * @package    local_advancedperfs
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_alternatelogin/alternatelogin",["jquery","core/config","core/log"],(function($,cfg,log){var alternatelogin={init:function(){$(".alternate-profile-choice").bind("click",this.togglechoice),$("#back-step-1").bind("click",this.switchtopanel1),$("#next-step-2").bind("click",this.switchtopanel2),$("#next-step-3").bind("click",this.send),$(".field-cpy-check input").bind("keyup",this.checkfieldcopy),$("input.field-non-empty-input").bind("keyup",this.checknonempty),$("select.field-non-empty-input").bind("change",this.checknonempty),$("#id-field-authcode-input").bind("change",this.checkauthcode),$(".field-cpy-check input").trigger("keyup"),$("input.field-non-empty-input").trigger("keyup"),$("select.field-non-empty-input").trigger("change"),$("#readmore").trigger("open"),alternatelogin.updatebutton3state(),log.debug("AMD alternate login initialized")},togglechoice:function(){var that=$(this),thatid=that.attr("id").match(/pv-choice-btn-(\d+)-(\d+)/)[1];$(".alternate-profile-choice").removeClass("selected"),$(".alternate-profile-field").val(""),that.addClass("selected"),$("#pv-"+thatid).val(that.attr("data-value")),$("#pv-"+thatid).removeClass("unchecked"),alternatelogin.updatebutton3state()},checknonempty:function(){var that=$(this);""!==that.val()?that.removeClass("unchecked"):that.addClass("unchecked"),alternatelogin.updatebutton2state(),alternatelogin.updatebutton3state()},checkauthcode:function(){var that=$(this),url=cfg.wwwroot+"/local/alternatelogin/ajax/service.php";url+="?what=checkcode",url+="&code="+that.val(),$.get(url,(function(data){1===data.result?$("#id-field-authcode-field").removeClass("error"):$("#id-field-authcode-field").addClass("error")}),"json")},switchtopanel2:function(){$("#sign-up-panel-1").addClass("hidden"),$("#sign-up-panel-2").removeClass("hidden")},switchtopanel1:function(){$("#sign-up-panel-1").removeClass("hidden"),$("#sign-up-panel-2").addClass("hidden")},send:function(){$("form[name=signup-form]").submit()},checkfieldcopy:function(){var baseelmname=$(this).attr("name").replace("confirm",""),confirmelmname=baseelmname+"confirm",val1=$("input[name="+baseelmname+"]").val(),val2=$("input[name="+confirmelmname+"]").val(),src=$("#"+baseelmname+"-field-cpy-check img").attr("src");val1===val2&&""!==val1?($("."+baseelmname+"-field-cpy-check img").attr("src",src.replace(/\bnook$/,"ok")),$("."+baseelmname+"-field-cpy-check img").attr("src",src.replace(/\bnook$/,"ok")),$("."+baseelmname+"-field-cpy-check").removeClass("unchecked")):($("."+baseelmname+"-field-cpy-check img").attr("src",src.replace(/\bok$/,"/nook")),$("."+baseelmname+"-field-cpy-check img").attr("src",src.replace(/\bok$/,"=nook")),$("."+baseelmname+"-field-cpy-check").addClass("unchecked")),alternatelogin.updatebutton2state()},updatebutton2state:function(){0===$("#sign-up-panel-1 .unchecked").length?$("#next-step-2").prop("disabled",!1):$("#next-step-2").prop("disabled",!0)},updatebutton3state:function(){0===$("#sign-up-panel-2 .unchecked").length?$("#next-step-3").prop("disabled",!1):$("#next-step-3").prop("disabled",!0)}};return alternatelogin}));

//# sourceMappingURL=alternatelogin.min.js.map
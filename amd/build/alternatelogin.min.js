define(["jquery","core/config","core/log"],function(a,b,c){var d={init:function(){a(".alternate-profile-choice").bind("click",this.togglechoice),a("#back-step-1").bind("click",this.switchtopanel1),a("#next-step-2").bind("click",this.switchtopanel2),a("#next-step-3").bind("click",this.send),a(".field-cpy-check input").bind("keyup",this.checkfieldcopy),a("input.field-non-empty-input").bind("keyup",this.checknonempty),a("select.field-non-empty-input").bind("change",this.checknonempty),a("#id-field-authcode-input").bind("change",this.checkauthcode),a(".field-cpy-check input").trigger("keyup"),a("input.field-non-empty-input").trigger("keyup"),a("select.field-non-empty-input").trigger("change"),a("#readmore").trigger("open"),d.updatebutton3state(),c.debug("AMD alternate login initialized")},togglechoice:function(){var b=a(this),c=b.attr("id").match(/pv-choice-btn-(\d+)-(\d+)/),e=c[1];a(".alternate-profile-choice").removeClass("selected"),a(".alternate-profile-field").val(""),b.addClass("selected"),a("#pv-"+e).val(b.attr("data-value")),a("#pv-"+e).removeClass("unchecked"),d.updatebutton3state()},checknonempty:function(){var b=a(this);""!==b.val()?b.removeClass("unchecked"):b.addClass("unchecked"),d.updatebutton2state(),d.updatebutton3state()},checkauthcode:function(){var c=a(this),d=b.wwwroot+"/local/alternatelogin/ajax/service.php";d+="?what=checkcode",d+="&code="+c.val(),a.get(d,function(b){1===b.result?a("#id-field-authcode-field").removeClass("error"):a("#id-field-authcode-field").addClass("error")},"json")},switchtopanel2:function(){a("#sign-up-panel-1").addClass("hidden"),a("#sign-up-panel-2").removeClass("hidden")},switchtopanel1:function(){a("#sign-up-panel-1").removeClass("hidden"),a("#sign-up-panel-2").addClass("hidden")},send:function(){a("form[name=signup-form]").submit()},checkfieldcopy:function(){var b=a(this),c=b.attr("name").replace("confirm",""),e=c+"confirm",f=a("input[name="+c+"]").val(),g=a("input[name="+e+"]").val(),h=a("#"+c+"-field-cpy-check img").attr("src");f===g&&""!==f?(a("."+c+"-field-cpy-check img").attr("src",h.replace(/\bnook$/,"ok")),a("."+c+"-field-cpy-check img").attr("src",h.replace(/\bnook$/,"ok")),a("."+c+"-field-cpy-check").removeClass("unchecked")):(a("."+c+"-field-cpy-check img").attr("src",h.replace(/\bok$/,"/nook")),a("."+c+"-field-cpy-check img").attr("src",h.replace(/\bok$/,"=nook")),a("."+c+"-field-cpy-check").addClass("unchecked")),d.updatebutton2state()},updatebutton2state:function(){0===a("#sign-up-panel-1 .unchecked").length?a("#next-step-2").prop("disabled",!1):a("#next-step-2").prop("disabled",!0)},updatebutton3state:function(){0===a("#sign-up-panel-2 .unchecked").length?a("#next-step-3").prop("disabled",!1):a("#next-step-3").prop("disabled",!0)}};return d});